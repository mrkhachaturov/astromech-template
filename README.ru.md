<div align="center">

<img src=".github/assets/ASTROMECH.png" width="100%" alt="Astromech Fleet" />

# Astromech

**Личный AI-флот. Инструменты, которые вы уже используете — теперь усиленные агентами.**

*Работает на [OpenClaw](https://github.com/openclaw/openclaw)*

</div>

---

[English](README.md) · **Русский**

---

*Давным-давно в далёкой-далёкой галактике....*

```
                    ╔═════════════════════════════════════════╗
                    ║        Эпизод II: ФЛОТ РАСШИРЯЕТСЯ      ║
                    ╚═════════════════════════════════════════╝

               Слишком долго люди действовали в одиночку — разбросанные
              по тысячам решений, удерживая контекст, который ни один
                           разум не создан хранить целиком.

               Возник новый порядок. Не господ и слуг, а пилотов и
              дроидов. Человек задаёт направление. Флот берёт остальное.
                          Один управляет — многие прокладывают путь.

               Интеллект больше не одиночный акт. Сильнейшая сила в
              галактике — не одинокий джедай. Это один человек с нужными
                                    дроидами рядом.

                                  Флот в сети.
```

---

## Почему дроиды. Почему Звёздные войны.

Большинство людей, строящих AI-агентов, относятся к ним как к скриптам — вход, выход, всё. Без имени, без характера, без преемственности.

В Звёздных войнах всё иначе. R2-D2 — просто схемы и память. BB-8 — просто шар с камерой. Но людям *не всё равно*. Есть любимчики. Они переживали, когда дроидам грозила опасность. Потому что у каждого был узнаваемый способ появляться — личность, которой можно доверять.

Это и есть принцип проектирования. Каждый агент флота имеет идентичность, характер, определённое место в иерархии. Йода не просто отвечает на вопросы — он возражает, держит долгосрочный взгляд, сохраняет спокойствие, когда вы нет. K-2SO не просто управляет задачами — он сообщает вам вероятность провала плана. L3-37 не просто отслеживает привычки — она замечает, когда вы изнашиваете себя.

Имена из Звёздных войн — не декорация. Это напоминание, что у агентов должен быть *голос*, а не только функция.

Ещё один принцип: человек остаётся пилотом. Всегда. Флот не заменяет суждение — он усиливает его. Каждый специалист имеет домен, ограниченный набор инструментов и доступ только к тому, что требует его роль.

---

## Реестр флота

| Юнит | Роль | Каналы |
|------|------|--------|
| <img src=".github/assets/Yoda.jpg" width="70"><br>**Yoda** | Оркестратор флота — стратегия, координация и надзор | Telegram |
| <img src=".github/assets/R2-D2.jpg" width="70"><br>**R2-D2** | Инфраструктура — серверы, контейнеры и деплой | Telegram |
| <img src=".github/assets/K-2SO.jpg" width="70"><br>**K-2SO** | Планировщик задач — проекты, OKR и спринты | Telegram |
| <img src=".github/assets/L3-37.jpg" width="70"><br>**L3-37** | Коуч по здоровью — фитнес, режим и привычки | Telegram |
| <img src=".github/assets/C-3PO.jpg" width="70"><br>**C-3PO** | Библиотекарь знаний — текст, исследования и документы | Telegram |
| <img src=".github/assets/BB-8.jpg" width="70"><br>**BB-8** | Маркетинг-аналитик — трафик, конверсии и рост | Telegram |
| <img src=".github/assets/BB-9E.jpg" width="70"><br>**BB-9E** | HR-аналитика — персонал и показатели | Telegram |
| <img src=".github/assets/R4-P17.jpg" width="70"><br>**R4-P17** | Финансовый аналитик — P&L, кэшфлоу и маржа | Telegram |
| <img src=".github/assets/D-0.jpg" width="70"><br>**D-O** | SMM — посты, расписание и контент | Telegram |
| <img src=".github/assets/CB-23.jpg" width="70"><br>**CB-23** | Зарезервирован — в ангаре | — |
| <img src=".github/assets/R5-D4.jpg" width="70"><br>**R5-D4** | Зарезервирован — в ангаре | — |

---

## Как это работает

Сообщения приходят из Telegram. Йода ведёт большинство разговоров — стратегия, решения, координация. Специалисты берут задачи по домену: K-2SO создаёт задачи в Jira и планирует спринты, L3-37 отслеживает здоровье, R4-P17 тянет финансовые данные. У каждого агента есть доступ только к инструментам своей области.

```
Пользователь (Telegram)
        │
        ▼
 Yoda (исполнительный)
        │
        ├──▶ K-2SO  ──▶ Jira · Todoist · OKR
        ├──▶ R2-D2  ──▶ Docker · серверы · CLI
        ├──▶ L3-37  ──▶ трекинг здоровья
        ├──▶ C-3PO  ──▶ база знаний · тексты
        ├──▶ BB-8   ──▶ маркетинг-аналитика
        ├──▶ BB-9E  ──▶ HR-данные
        ├──▶ R4-P17 ──▶ финансы
        └──▶ D-O    ──▶ Postiz · соцсети
```

Каждый агент может порождать суб-агентов и воркеры для параллельного выполнения. Глубина ограничена двумя уровнями.

---

## Память

Каждый агент использует нативную систему памяти OpenClaw — AI-эмбеддинги с векторным хранилищем SQLite. Сессии и дневные заметки индексируются и извлекаются автоматически, агент сохраняет контекст прошлых разговоров без ручного вмешательства.

Поверх этого добавлен общий глобальный слой через [OpenMemory](https://github.com/mem0ai/openmemory-mcp). Любой агент может читать и писать в него. При сохранении памяти модель OpenAI обрабатывает её и присваивает теги из фиксированной таксономии: `personal` · `health` · `preferences` · `behavior-rules` · `work` · `technical` · `business` · `values`. В начале каждой сессии памяти по разрешённым категориям агента подтягиваются в его `USER.md`.

Йода не имеет фильтра категорий — видит всё. Специалисты видят только то, что относится к их домену.

---

## Голос

Когда агент говорит, ответ не просто зачитывается вслух — он формируется под характер персонажа. Синтезированная речь обрабатывается через ffmpeg под персону агента, затем смешивается с записями звуков этого персонажа. Результат приходит как единое голосовое сообщение, которое ощущается как дроид, а не стандартный TTS.

Настроение ответа определяет, какой звук персонажа играет в начале. Агент выбирает настроение из контекста автоматически.

| Настроение | Используется когда |
|------------|--------------------|
| `default` | Обычные ответы |
| `happy` | Хорошие новости, выполненные задачи |
| `excited` | Праздники, победы |
| `angry` | Ошибки, срочные предупреждения |
| `confused` | Уточнения, неопределённость |
| `worried` | Опасения, риски |

---

## Стек

Всё работает как Docker Compose стек на одном VPS.

```
astromech/
├── .openclaw/              # Рантайм шлюза (монтируется в контейнер)
│   ├── openclaw.json       # Основной конфиг (импортирует из config/*.json5)
│   ├── config/             # Модульные конфиги: агенты, каналы, память, хуки…
│   └── workspace-*/        # На агента: SOUL.md, IDENTITY.md, навыки, память
├── compose/                # Docker Compose файлы сервисов (по одному на сервис)
├── dockerfiles/            # Определения кастомных образов
├── data/                   # Persistent bind-mount данные
└── tools/
    └── wiki/               # База знаний OpenClaw (векторная БД, 10k+ чанков)
```

---

## Это шаблон

Репозиторий содержит структуру и примеры конфигурации — отправную точку для сборки своего флота. Агенты, их роли и инструменты подобраны под конкретный use-case, но архитектура универсальна.

Подробная документация по настройке и видео с полным прохождением выйдут позже.

**Начать:** скопируйте `.env.example` → `.env`, заполните свои значения, запустите `docker compose up -d`.
